<ng-template #loading>
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-template>

<div *ngIf="(load$ | async); else loading">
  <mat-progress-bar *ngIf="!load" 
                    mode="indeterminate"></mat-progress-bar>

  <core-search-dynamic [display]="display" 
                       [fieldsViewOptionsSp]="fieldsViewOptionsSp"></core-search-dynamic>
  
  <core-table-dynamic [dataSource]="data" 
                      [length]="length" 
                      [display]="display" 
                      [fieldsViewOptions]="tableOptions.fieldsViewOptions" 
                      [optColumn]="tableOptions.optColumn"
                      (eventTable)= "switchAction($event)"
                      [title]="tableOptions.title"
                      [entityName]="tableOptions.entityName"
                      [sortActive]="tableOptions.sortActive"
                      [sortDirection]="tableOptions.sortDirection"
                      [serverSortObligatory]="tableOptions.serverSortObligatory"></core-table-dynamic>
</div>
